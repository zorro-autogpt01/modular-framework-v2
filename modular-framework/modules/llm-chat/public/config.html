<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LLM Chat – Config & Profiles</title>
  <!-- relative so it works under /modules/llm-chat/ -->
  <link rel="stylesheet" href="./css/theme.css" />
</head>
<body>
  <h2>⚙️ LLM Chat – Settings</h2>
  <div class="tabs">
    <div class="tab active" id="tGlobal">Global</div>
    <div class="tab" id="tProfiles">Profiles</div>
  </div>

  <div id="global" class="card">
    <div class="row3">
      <div>
        <label>Default Provider</label>
        <select id="provider">
          <option value="openai">OpenAI</option>
          <option value="openai-compatible">OpenAI-compatible</option>
          <option value="ollama">Ollama</option>
        </select>
      </div>
      <div>
        <label>Default Model</label>
        <input id="model" placeholder="gpt-4o-mini or llama3" />
      </div>
      <div>
        <label>Temperature</label>
        <input id="temperature" type="number" step="0.1" min="0" max="2" />
      </div>
    </div>
    <label>Base URL</label>
    <input id="baseUrl" placeholder="https://api.openai.com" />
    <label>API Key <span class="muted">(not required for Ollama)</span></label>
    <input id="apiKey" placeholder="sk-..." />

    <div class="row">
      <div>
        <label>Max tokens (optional)</label>
        <input id="max_tokens" type="number" />
      </div>
      <div>
        <label>&nbsp;</label>
        <button id="saveGlobalBtn">Save Global</button>
      </div>
    </div>
  </div>

  <div id="profiles" class="card" style="display:none">
    <h3>Profiles</h3>
    <div class="muted">Profiles override global settings when selected in the chat toolbar. Each can set provider/base URL/model/API key and a system prompt.</div>
    <div class="row3">
      <div>
        <label>Name</label>
        <input id="pName" />
      </div>
      <div>
        <label>Provider</label>
        <select id="pProvider">
          <option value="">(inherit global)</option>
          <option value="openai">OpenAI</option>
          <option value="openai-compatible">OpenAI-compatible</option>
          <option value="ollama">Ollama</option>
        </select>
      </div>
      <div>
        <label>Model</label>
        <input id="pModel" placeholder="(inherit or set)" />
      </div>
    </div>
    <div class="row">
      <div>
        <label>Base URL</label>
        <input id="pBaseUrl" placeholder="(inherit or set)" />
      </div>
      <div>
        <label>API Key</label>
        <input id="pApiKey" placeholder="(inherit or set)" />
      </div>
    </div>
    <div class="row">
      <div>
        <label>Temperature</label>
        <input id="pTemp" type="number" step="0.1" min="0" max="2" placeholder="(inherit)" />
      </div>
      <div>
        <label>Max tokens</label>
        <input id="pMax" type="number" placeholder="(inherit)" />
      </div>
    </div>
    <label>System prompt</label>
    <textarea id="pSystem" rows="6" placeholder="e.g., Act as a senior React engineer ..."></textarea>

    <div>
      <button id="saveProfileBtn">Save Profile</button>
      <button class="ghost" id="loadDefaultsBtn">Load Default Profiles</button>
      <button class="ghost" id="exportBtn">Export</button>
      <input type="file" id="importFile" accept="application/json" style="display:none" />
      <button class="ghost" id="importBtn">Import</button>
    </div>

    <div class="list" id="profileList"></div>
  </div>

  <!-- relative so it works under /modules/llm-chat/ -->
  <script type="module" src="./js/config.page.js"></script>
</body>
</html>
