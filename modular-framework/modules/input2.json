{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/code-change-plan.schema.json",
  "title": "CodeChangePlan",
  "type": "object",
  "version": "1.0",
  "project_root": "modular-framework",
  "backup": true,
  "changes": [
    {
      "id": "framework-web-dockerfile",
      "description": "Dockerfile for the framework static site container (served by nginx; edge-nginx handles reverse proxy/TLS).",
      "op": "write_file",
      "path": "framework/Dockerfile",
      "mode": "overwrite",
      "content": "# framework/Dockerfile\n# Purpose: Serve the framework UI (static HTML/CSS/JS) via nginx inside the cluster.\n# TLS and reverse-proxying are handled by the separate edge-nginx container.\n\nFROM nginx:alpine\n\n# Install curl for healthcheck\nRUN apk add --no-cache curl\n\n# Copy nginx configuration (serves SPA and /health)\nCOPY nginx.conf /etc/nginx/nginx.conf\n\n# Copy static assets\nCOPY html /usr/share/nginx/html\n\n# Healthcheck hits the container-local endpoint\nHEALTHCHECK --interval=30s --timeout=5s --start-period=5s --retries=3 \\\n  CMD curl -sf http://localhost/health || exit 1\n\nEXPOSE 80\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n"
    }
  ]
}